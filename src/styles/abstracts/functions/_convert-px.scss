@use "sass:math";
@use "sass:meta";

@function convert-px($px-value, $unit: 'rem') {
  // Normalize: turn 24px â†’ 24 (unitless). If it's already unitless, keep it.
  $px-number: if(
    meta.type-of($px-value) == 'number' and math.unit($px-value) == 'px',
    math.div($px-value, 1px),
    $px-value
  );

  @if $unit == 'rem' {
    @return math.div($px-number, 16) * 1rem;
  } @else if $unit == 'em' {
    @return math.div($px-number, 16) * 1em;
  } @else if $unit == 'ch' {
    // ($px-number / 16 / 0.5) == $px-number / 8
    @return math.div($px-number, 8) * 1ch;
  } @else {
    @error "Unsupported unit: #{$unit}. Use 'rem', 'em', or 'ch'.";
  }
}

@function px-to-rem($px-value) {
  @return convert-px($px-value, 'rem');
}

@function px-to-em($px-value) {
  @return convert-px($px-value, 'em');
}

@function px-to-ch($px-value) {
  @return convert-px($px-value, 'ch');
}
